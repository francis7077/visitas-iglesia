<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Iglesia Conectada | Gesti√≥n de Visitas</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #4a6cf7, #3a5ad9);
            --success-color: #22c55e;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Inter', sans-serif;
            background: #f4f6f8;
        }

        /* ‚õ™ Topbar Redise√±ada */
        .topbar {
            background: var(--primary-gradient);
            color: white;
            padding: 12px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 0 0 20px 20px; /* Bordes redondeados solo abajo */
            margin: 0 auto 25px auto;
            max-width: 1100px;
            box-shadow: 0 8px 20px rgba(58, 90, 217, 0.2);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .topbar .logo {
            font-weight: 700;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
            letter-spacing: -0.5px;
        }

        .topbar .menu {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .topbar .menu a {
            color: white;
            text-decoration: none;
            font-size: 13px;
            padding: 8px 16px;
            border-radius: 12px;
            background: rgba(255,255,255,0.12);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 600;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .topbar .menu a:hover {
            background: rgba(255,255,255,1);
            color: #3a5ad9;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        /* üü¢ VALOR AGREGADO: Status de Usuario (Estilo Messenger/SaaS) */
        .usuario-badge {
            background: rgba(0,0,0,0.2);
            padding: 6px 14px;
            border-radius: 30px;
            font-size: 12px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            border: 1px solid rgba(255,255,255,0.2);
            color: #e2e8f0;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: var(--success-color);
            border-radius: 50%;
            position: relative;
        }

        .status-dot::after {
            content: "";
            position: absolute;
            width: 100%;
            height: 100%;
            background: var(--success-color);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.8; }
            100% { transform: scale(2.5); opacity: 0; }
        }

        .contenedor {
            max-width: 1100px;
            margin: auto;
            padding: 0 15px 50px 15px;
        }

        /* Mobile Optimization */
        @media (max-width: 768px) {
            .topbar {
                flex-direction: column;
                border-radius: 0;
                padding: 15px;
                gap: 15px;
            }
            .topbar .menu {
                width: 100%;
                justify-content: center;
            }
            .usuario-badge { order: -1; margin-bottom: 5px; }
        }
    </style>
</head>
<body>

<div class="topbar">
    <div class="logo">
        <span style="font-size: 24px;">‚õ™</span> 
        <span>SISTEMA DE VISITAS</span>
    </div>

    <div class="menu">
        {% if session.get("logueado") %}
            <div class="usuario-badge">
                <div class="status-dot"></div>
                {{ session.get("nombre") }} 
                <span style="font-weight: 400; opacity: 0.7;">| {{ session.get("usuario") | capitalize }}</span>
            </div>
            
            <a href="/visitas">üìã Listado</a>
            <a href="/logout" style="background: rgba(239, 68, 68, 0.2); border-color: rgba(239, 68, 68, 0.3);">üîí Salir</a>
        {% else %}
            <a href="/">üìù Nuevo Registro</a>
            <a href="/login">üîê Acceso Staff</a>
        {% endif %}
    </div>
</div>

<div class="contenedor" style="animation: fadeIn 0.5s ease-in-out;">
    {% block contenido %}{% endblock %}
</div>

<footer style="text-align: center; padding: 20px; color: #94a3b8; font-size: 12px;">
    &copy; {{ ahora.year }} Sistema de Gesti√≥n Pastoral - Iglesia Local
</footer>

<style>
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }
</style>

</body>
</html>