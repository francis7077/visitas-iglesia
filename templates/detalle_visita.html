{% extends "base.html" %}
{% block contenido %}

<h2>ğŸ“ Historial de Visitas</h2>

<div class="tarjeta-perfil">

    <h3>Visitas realizadas</h3>

    {% if visitas %}
        <table>
            <thead>
                <tr>
                    <th>Fecha</th>
                    <th>Visitado por</th>
                    <th>Nota</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                {% for v in visitas %}
                <tr>
                    <td>{{ v.fecha_visita.strftime('%d/%m/%Y') }}</td>
                    <td>{{ v.visitado_por }}</td>
                    <td>{{ v.nota or "â€”" }}</td>
                    <td>
                        <a href="/editar_visita/{{ v.id }}">âœï¸</a>
                        <a href="/eliminar_visita/{{ v.id }}" onclick="return confirm('Â¿Eliminar esta visita?')">ğŸ—‘ï¸</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>Este visitante aÃºn no tiene visitas registradas.</p>
    {% endif %}

</div>

<br>

<div class="tarjeta-perfil">

<h3>â• Registrar nueva visita</h3>

<form method="post">

    <label>Visitado por</label>
    <select name="visitado_por" required>
        <option>Sociedad de JÃ³venes</option>
        <option>Sociedad de Damas</option>
        <option>Sociedad de Caballeros</option>
        <option>Directiva Local</option>
        <option>Familia Pastoral</option>
        <option>Visita Mixta</option>
    </select>

    <label>Fecha de la visita</label>
    <input type="date" name="fecha_visita" required>

    <label>Nota</label>
    <textarea name="nota"></textarea>

    <button>Guardar visita</button>

</form>

</div>

<a href="/visitas" class="btn-volver">â† Volver a visitas</a>

{% endblock %}
